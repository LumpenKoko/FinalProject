<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="communityShortsMapper">
	  <resultMap type="Shorts" id="selectShorts">
	  	 <result column="SHORTS_NO" property="shortsNo"></result>
	  	 <result column="SHORTS_CONTENT" property="shortsContent"></result>
	  	 <result column="COUNT" property="count"></result>
	  	 <result column="ENROLL_DATE" property="enrollDate"></result>
	  	 <result column="MODIFY_DATE" property="modifyDate"></result>
	  	 <result column="STATUS" property="status"></result>
	  	 <result column="USER_NICKNAME" property="userNo"></result>
	  </resultMap>
	  
	   <resultMap type="Attachment" id="shortsAttachment">
	   		<result column="ORIGIN_NAME" property="originName"></result>
	   		<result column="CHANGE_NAME" property="changeName"></result>
	   		<result column="FILE_PATH" property="filePath"></result>
	   </resultMap>
  
  	<select id="communityShortsSelectList" resultMap="selectShorts">
  	      SELECT 
  	          SHORTS_NO,
  	          SHORTS_CONTENT,
  	          S.COUNT,
  	          S.ENROLL_DATE,
  	          S.MODIFY_DATE,
  	          S.STATUS,
  	          USER_NICKNAME
  	          FROM SHORTS S
  	          JOIN MEMBER M
  	          ON (S.USER_NO = M.USER_NO)
  	          WHERE S.STATUS= TRUE
  	</select>
  	
  	
  	<select id="selectOneShortAttachment" resultMap="shortsAttachment">
  	 
  		        SELECT
					ORIGIN_NAME,
					CHANGE_NAME,
					FILE_PATH
					FROM PICTURE
		         WHERE SHORTS_NO = #{shortNo}
		        AND FILE_LEVEL = 1
	</select>
	
	<select id="selectShortsCount" resultType="_int">
	
		SELECT COUNT(*)
				FROM SHORTS
	</select>
  	
   
   
  </mapper>